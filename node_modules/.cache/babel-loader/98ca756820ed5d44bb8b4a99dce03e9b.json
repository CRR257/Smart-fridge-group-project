{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\lluna\\\\bootcamp\\\\collab\\\\los-chicotes\\\\skylab-bootcamp-201901\\\\staff\\\\groups\\\\null\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\lluna\\\\bootcamp\\\\collab\\\\los-chicotes\\\\skylab-bootcamp-201901\\\\staff\\\\groups\\\\null\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\lluna\\\\bootcamp\\\\collab\\\\los-chicotes\\\\skylab-bootcamp-201901\\\\staff\\\\groups\\\\null\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\lluna\\\\bootcamp\\\\collab\\\\los-chicotes\\\\skylab-bootcamp-201901\\\\staff\\\\groups\\\\null\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\lluna\\\\bootcamp\\\\collab\\\\los-chicotes\\\\skylab-bootcamp-201901\\\\staff\\\\groups\\\\null\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\lluna\\\\bootcamp\\\\collab\\\\los-chicotes\\\\skylab-bootcamp-201901\\\\staff\\\\groups\\\\null\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\lluna\\\\bootcamp\\\\collab\\\\los-chicotes\\\\skylab-bootcamp-201901\\\\staff\\\\groups\\\\null\\\\smart-fridge\\\\src\\\\Components\\\\Home\\\\index.js\";\nimport React from 'react';\nimport Nav from '../Nav';\nimport InputsFridge from '../InputsFridge';\nimport EditProfile from '../EditProfile';\nimport Results from '../Results';\nimport Detail from '../Detail';\nimport logic from '../../logic';\nimport { withRouter, Route, Redirect } from 'react-router-dom';\nimport './index.sass';\nimport Feedback from '../Feedback';\n\nvar Home =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      recipes: null,\n      searchFeedback: null,\n      recipe: null,\n      queryList: null,\n      ingredientsList: null\n    };\n\n    _this.handleOnSearch = function (query, calories, diet, health) {\n      var queryList = query.split('+'); //To get query in array\n\n      try {\n        logic.search(query, calories, diet, health).then(function (recipes) {\n          _this.setState({\n            recipes: recipes,\n            queryList: queryList\n          }, function () {\n            return _this.props.history.push('/home/search');\n          });\n        }).catch(function (_ref) {\n          var message = _ref.message;\n\n          _this.setState({\n            searchFeedback: message\n          }, function () {\n            return _this.props.history.push('/home/feedback');\n          });\n\n          console.log(message);\n        });\n      } catch (error) {\n        console.error(error.message);\n      }\n    };\n\n    _this.handleLogout = function () {\n      logic.logout();\n\n      _this.props.history.push('/');\n    };\n\n    _this.handleEditProfileButton = function () {\n      _this.props.history.push('/home/profile');\n    };\n\n    _this.handleCancelButton = function () {\n      _this.props.history.push('/home');\n    };\n\n    _this.handleEditProfile = function (data) {\n      try {\n        logic.update(sessionStorage.getItem('user-id'), sessionStorage.getItem('user-api-token'), data).then(function () {\n          return logic.retrieve(sessionStorage.getItem('user-id'), sessionStorage.getItem('user-api-token'));\n        }).then(function (user) {\n          _this.props.history.push(\"/home\");\n        }).catch(function (_ref2) {\n          var message = _ref2.message;\n          return _this.setState({\n            registerFeedback: message\n          });\n        });\n      } catch (_ref3) {\n        var message = _ref3.message;\n\n        _this.setState({\n          registerFeedback: message\n        });\n      }\n    };\n\n    _this.handleGoBackSearch = function () {\n      _this.props.history.push('/home');\n\n      _this.setState({\n        recipes: null,\n        searchFeedback: null\n      });\n    };\n\n    _this.handleEditInputs = function () {\n      _this.props.history.push('/home');\n\n      _this.setState({\n        recipes: null\n      });\n    };\n\n    _this.handleOnDetail = function (recipeUri) {\n      var _assertThisInitialize = _assertThisInitialized(_assertThisInitialized(_this)),\n          recipes = _assertThisInitialize.state.recipes;\n\n      try {\n        var recipe = logic.detail(recipeUri, recipes);\n        var ingredientsList = logic.generateLists(recipe.ingredientLines, _this.state.queryList);\n\n        _this.setState({\n          recipe: recipe,\n          ingredientsList: ingredientsList\n        });\n\n        _this.props.history.push('/home/detail');\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          recipes = _this$state.recipes,\n          searchFeedback = _this$state.searchFeedback,\n          recipe = _this$state.recipe,\n          ingredientsList = _this$state.ingredientsList;\n      return React.createElement(\"main\", {\n        className: \"home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        className: \"fixed\",\n        user: this.props.user,\n        onLogout: this.handleLogout,\n        editProfile: this.handleEditProfileButton,\n        results: this.state.recipes,\n        editInputs: this.handleEditInputs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/home\",\n        render: function render() {\n          return logic.userLoggedIn ? React.createElement(InputsFridge, {\n            onSearch: _this2.handleOnSearch,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/home/profile\",\n        render: function render() {\n          return logic.userLoggedIn ? React.createElement(EditProfile, {\n            onEditProfile: _this2.handleEditProfile,\n            cancelButton: _this2.handleCancelButton,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/home/search\",\n        render: function render() {\n          return logic.userLoggedIn && recipes ? React.createElement(Results, {\n            recipes: recipes,\n            onDetail: _this2.handleOnDetail,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/home/detail\",\n        render: function render() {\n          return logic.userLoggedIn && recipe ? React.createElement(Detail, {\n            recipe: recipe,\n            ingredients: ingredientsList,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/home/search\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/home/feedback\",\n        render: function render() {\n          return logic.userLoggedIn && searchFeedback ? React.createElement(Feedback, {\n            goBackSearch: _this2.handleGoBackSearch,\n            message: searchFeedback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/home\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport default withRouter(Home);","map":{"version":3,"sources":["C:\\Users\\lluna\\bootcamp\\collab\\los-chicotes\\skylab-bootcamp-201901\\staff\\groups\\null\\smart-fridge\\src\\Components\\Home\\index.js"],"names":["React","Nav","InputsFridge","EditProfile","Results","Detail","logic","withRouter","Route","Redirect","Feedback","Home","state","recipes","searchFeedback","recipe","queryList","ingredientsList","handleOnSearch","query","calories","diet","health","split","search","then","setState","props","history","push","catch","message","console","log","error","handleLogout","logout","handleEditProfileButton","handleCancelButton","handleEditProfile","data","update","sessionStorage","getItem","retrieve","user","registerFeedback","handleGoBackSearch","handleEditInputs","handleOnDetail","recipeUri","detail","generateLists","ingredientLines","userLoggedIn","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Nav from '../Nav'\r\nimport InputsFridge from '../InputsFridge'\r\nimport EditProfile from '../EditProfile'\r\nimport Results from '../Results'\r\nimport Detail from '../Detail'\r\nimport logic from '../../logic'\r\nimport { withRouter, Route, Redirect } from 'react-router-dom'\r\nimport './index.sass'\r\nimport Feedback from '../Feedback'\r\n\r\n\r\nclass Home extends React.Component{\r\n\r\n    state={recipes: null,  searchFeedback: null, recipe: null, queryList: null, ingredientsList: null}\r\n\r\n    handleOnSearch= (query, calories, diet, health,) => {\r\n        let queryList=query.split('+') //To get query in array\r\n        try {\r\n            logic.search(query, calories, diet, health)\r\n                .then(recipes=> {\r\n                    this.setState({recipes, queryList}, ()=> this.props.history.push('/home/search'))        \r\n                })\r\n                .catch(({message})=> {\r\n                    this.setState({searchFeedback:message}, ()=> this.props.history.push('/home/feedback'))\r\n                    console.log(message)\r\n                })\r\n\r\n        }catch(error){\r\n            console.error(error.message)\r\n    \r\n        }\r\n    }\r\n\r\n    handleLogout= () => {\r\n        logic.logout()\r\n       this.props.history.push('/')\r\n    }\r\n\r\n    handleEditProfileButton = () => {\r\n        this.props.history.push('/home/profile')\r\n    }\r\n\r\n    handleCancelButton = () => {\r\n        this.props.history.push('/home')\r\n    }\r\n\r\n    handleEditProfile = data =>{\r\n        try {\r\n            logic.update(sessionStorage.getItem('user-id'), sessionStorage.getItem('user-api-token') ,data)\r\n                .then (() => logic.retrieve(sessionStorage.getItem('user-id'), sessionStorage.getItem('user-api-token')))\r\n                .then (user => {\r\n                    this.props.history.push(`/home`)\r\n                })\r\n                .catch(({ message }) => this.setState({ registerFeedback: message }))\r\n\r\n        } catch ({ message }) {\r\n            this.setState({ registerFeedback: message })\r\n        }\r\n\r\n    }\r\n\r\n    handleGoBackSearch=()=>{\r\n        this.props.history.push('/home')\r\n        this.setState({recipes:null, searchFeedback: null})\r\n    }\r\n\r\n    handleEditInputs=()=>{\r\n        this.props.history.push('/home')\r\n        this.setState({recipes: null})\r\n    }\r\n\r\n    handleOnDetail = recipeUri => {\r\n\r\n        const {state: {recipes}} =this\r\n     \r\n        try{\r\n            let recipe=logic.detail(recipeUri, recipes)\r\n     \r\n            let ingredientsList=logic.generateLists(recipe.ingredientLines, this.state.queryList)\r\n            this.setState({recipe, ingredientsList})\r\n            this.props.history.push('/home/detail')\r\n\r\n        }catch(error){\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const {state:{ recipes, searchFeedback, recipe, ingredientsList}} =  this\r\n        \r\n        return <main className=\"home\">\r\n                <Nav className='fixed' user={this.props.user} onLogout={this.handleLogout} editProfile={this.handleEditProfileButton} results={this.state.recipes} editInputs = {this.handleEditInputs} />\r\n                {<Route exact path=\"/home\" render={() =>  logic.userLoggedIn ? <InputsFridge onSearch={this.handleOnSearch}/> : <Redirect to=\"/\" />} />}\r\n                {<Route path=\"/home/profile\" render={() =>  logic.userLoggedIn ? <EditProfile onEditProfile={this.handleEditProfile} cancelButton={this.handleCancelButton}/> : <Redirect to=\"/\" />} />}\r\n                {<Route exact path=\"/home/search\" render={() => (logic.userLoggedIn&& recipes) ? <Results recipes={recipes} onDetail ={this.handleOnDetail}/> : <Redirect to = \"/\" />} />}\r\n                {<Route exact path=\"/home/detail\" render={() => (logic.userLoggedIn && recipe)? <Detail recipe={recipe} ingredients={ingredientsList}/> : <Redirect to = \"/home/search\" />} />}\r\n                {<Route path=\"/home/feedback\" render={()=> (logic.userLoggedIn && searchFeedback)?<Feedback goBackSearch={this.handleGoBackSearch} message={searchFeedback}/>:<Redirect to=\"/home\" /> }/>}\r\n            </main>\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(Home)"]},"metadata":{},"sourceType":"module"}