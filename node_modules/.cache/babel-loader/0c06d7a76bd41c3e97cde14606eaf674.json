{"ast":null,"code":"import userApi from '../user-api';\nimport edamamApi from '../edamam-api';\n/**\r\n * Logic for the smart-fridge app\r\n */\n\nvar logic = {\n  setUserId: function setUserId(id) {\n    this.___userId___ = id;\n  },\n  getUserId: function getUserId() {\n    return this.___userId___;\n  },\n  setUserApiToken: function setUserApiToken(token) {\n    this.___userApiToken___ = token;\n  },\n  getUserApiToken: function getUserApiToken() {\n    return this.___userApiToken___;\n  },\n  setUser: function setUser(user) {\n    this.___user___ = user;\n  },\n  getUser: function getUser() {\n    return this.___user___;\n  },\n\n  set __userId__(id) {\n    this.setUserId(id);\n  },\n\n  get __userId__() {\n    return this.getUserId();\n  },\n\n  set __userApiToken__(token) {\n    this.setUserApiToken(token);\n  },\n\n  get __userApiToken__() {\n    return this.getUserApiToken();\n  },\n\n  set __user__(user) {\n    this.setUser(user);\n  },\n\n  get __user__() {\n    return this.getUser();\n  },\n\n  get userLoggedIn() {\n    return !!this.__userId__ && !!this.__userApiToken__;\n  },\n\n  logout: function logout() {\n    this.__userId__ = null;\n    this.__userApiToken__ = null;\n    this.__user__ = null;\n  },\n\n  /**\r\n   * Calculate the total amount of daily calories that the user needs based on his params.\r\n   *\r\n   * @param {string} gender\r\n   * @param {number} height - cm\r\n   * @param {number} weight - Kg\r\n   * @param {string} birthYear - Y/M/D\r\n   * @param {string} lifeStyle\r\n   * \r\n   * @throws {Error} - On empty values\r\n   * @throws {TypeError} - On different data types\r\n   *\r\n   */\n  caloriesCounter: function caloriesCounter(gender, height, weight, birthdateString, lifeStyle) {\n    var birthdate = new Date(birthdateString);\n    var cur = new Date();\n    var diff = cur - birthdate; // This is the difference in milliseconds\n\n    var age = Math.floor(diff / 31557600000);\n    if (typeof gender !== 'string') throw TypeError(gender + ' is not a string');\n    if (!gender.trim().length) throw Error('gender cannot be empty');\n    if (typeof height !== 'number') throw TypeError(height + ' is not a number');\n    if (!(50 < height && height < 250)) throw Error(height + ' should be a number between 50 and 230');\n    if (typeof weight !== 'number') throw TypeError(weight + ' is not a number');\n    if (!(20 < weight && weight < 400)) throw Error(weight + ' should be a number between 20 and 400');\n    if (typeof birthdateString !== 'string') throw TypeError(birthdateString + ' is not a string');\n    if (!birthdateString.trim().length) throw Error('birthDate cannot be empty');\n    if (typeof age !== 'number') throw TypeError(age + ' is not a number');\n    if (!(15 < age && age < 120)) throw Error(age + ' must be between 15 and 120');\n    if (typeof lifeStyle !== 'string') throw TypeError(lifeStyle + ' is not a string');\n    if (!lifeStyle.trim().length) throw Error('lifeStyle cannot be empty');\n    var totalCalories;\n\n    if (gender === \"male\") {\n      var bmr = 10 * weight + 6.25 * height - 5 * age + 5;\n\n      if (lifeStyle === \"sedentary\") {\n        totalCalories = bmr * 1.53;\n      } else if (lifeStyle === \"active\") {\n        totalCalories = bmr * 1.76;\n      } else {\n        totalCalories = bmr * 2.25;\n      }\n    } else if (gender === \"female\") {\n      var _bmr = 10 * weight + 6.25 * height - 5 * age - 161;\n\n      if (lifeStyle === \"sedentary\") {\n        totalCalories = _bmr * 1.53;\n      } else if (lifeStyle === \"active\") {\n        totalCalories = _bmr * 1.76;\n      } else {\n        totalCalories = _bmr * 2.25;\n      }\n    }\n\n    return Math.floor(Math.round(totalCalories));\n  },\n\n  /**\r\n  * \r\n  * Toggles between pushing and deleting a song to the array of favourite songs in the property favourites of user.\r\n  * \r\n  * @param {string} id\r\n  * @param {string} token \r\n  * @param {object} recipe\r\n  * \r\n  */\n  toggleFavourite: function toggleFavourite(id, token, recipe) {\n    var _this = this;\n\n    return this.retrieve(id, token).then(function () {\n      var favourites = JSON.parse(_this.__user__).favourites;\n      var includeRecipe = favourites.find(function (r) {\n        return recipe.recipe.uri === r.recipe.uri;\n      });\n\n      if (!includeRecipe) {\n        favourites.push(recipe);\n      } else {\n        favourites = favourites.filter(function (r) {\n          return recipe.recipe.uri !== r.recipe.uri;\n        });\n      }\n\n      JSON.parse(_this.__user__).favourites = favourites;\n      return _this.update(id, token, {\n        favourites: favourites\n      });\n    }).then(function () {\n      return _this.retrieve(id, token);\n    });\n  },\n\n  /**\r\n   * \r\n   * Registers a user.\r\n   * \r\n   * @param {string} name \r\n   * @param {string} surname \r\n   * @param {string} username \r\n   * @param {string} password \r\n   * @param {string} passwordConfirm \r\n   * @param {string} gender \r\n   * @param {number} height \r\n   * @param {number} weight \r\n   * @param {string} birthDate \r\n   * @param {string} lifeStyle \r\n   * \r\n   * @throws {Error} - When length of arguments differs from 10\r\n   */\n  register: function register(name, surname, username, password, passwordConfirm, gender, height, weight, birthDate, lifeStyle) {\n    var _this2 = this;\n\n    var birthdate = new Date(birthDate);\n    var cur = new Date();\n    var diff = cur - birthdate; // This is the difference in milliseconds\n\n    var age = Math.floor(diff / 31557600000);\n    if (arguments.length < 10) throw Error('All arguments were not introduced in the function');\n    if (arguments.length > 10) throw Error('Too many arguments were introduced in the function');\n    if (typeof gender !== 'string') throw TypeError(gender + ' is not a string');\n    if (!gender.trim().length) throw Error('gender cannot be empty');\n    if (typeof height !== 'number') throw TypeError(height + ' is not a number');\n    if (!(50 < height && height < 250)) throw Error('height should be a number between 50 and 230');\n    if (typeof weight !== 'number') throw TypeError(weight + ' is not a number');\n    if (!(20 < weight && weight < 400)) throw Error('your weight should be a number between 20 and 400');\n    if (typeof birthDate !== 'string') throw TypeError(birthDate + ' is not a string');\n    if (!birthDate.trim().length) throw Error('birthDate cannot be empty');\n    if (typeof age !== 'number') throw TypeError(age + ' is not a number');\n    if (!(15 < age && age < 120)) throw Error('your age must be between 15 and 120');\n    if (typeof lifeStyle !== 'string') throw TypeError(lifeStyle + ' is not a string');\n    if (!lifeStyle.trim().length) throw Error('lifeStyle cannot be empty');\n    return userApi.register(name, surname, username, password, passwordConfirm, gender, birthDate, height, weight, lifeStyle).then(function (id) {\n      _this2.__userId__ = id;\n    });\n  },\n\n  /**\r\n   * \r\n   * Logs In a user.\r\n   * \r\n   * @param {string} email \r\n   * @param {string} password \r\n   * \r\n   * @throws {Error} - When length of arguments differs from 2\r\n   */\n  login: function login(email, password) {\n    var _this3 = this;\n\n    if (arguments.length < 2) throw Error('All arguments were not introduced in the function');\n    if (arguments.length > 2) throw Error('Too many arguments were introduced in the function');\n    return userApi.authenticate(email, password).then(function (_ref) {\n      var id = _ref.id,\n          token = _ref.token;\n      _this3.__userId__ = id;\n      _this3.__userApiToken__ = token;\n    });\n  },\n\n  /**\r\n   * \r\n   * Retrieves data of a user.\r\n   * \r\n   * @param {string} id \r\n   * @param {string} token \r\n   * \r\n   * @throws {Error} - When length of arguments differs from 2\r\n   */\n  retrieve: function retrieve(id, token) {\n    var _this4 = this;\n\n    if (arguments.length < 2) throw Error('All arguments were not introduced in the function');\n    if (arguments.length > 2) throw Error('Too many arguments were introduced in the function');\n    return userApi.retrieve(id, token).then(function (user) {\n      _this4.__user__ = user;\n    });\n  },\n\n  /**\r\n   * \r\n   * Updates user information.\r\n   * \r\n   * @param {string} id \r\n   * @param {string} token \r\n   * @param {object} data \r\n   * \r\n   * @throws {Error} - When length of arguments differs from 3\r\n   */\n  update: function update(id, token, data) {\n    if (arguments.length < 3) throw Error('All arguments were not introduced in the function');\n    if (arguments.length > 3) throw Error('Too many arguments were introduced in the function');\n    return userApi.update(id, token, data);\n  },\n\n  /**\r\n   * \r\n   * Removes a user from the database.\r\n   * \r\n   * @param {string} id \r\n   * @param {string} token \r\n   * @param {string} username \r\n   * @param {string} password \r\n   * \r\n   * @throws {Error} - When length of arguments differs from 4\r\n   */\n  remove: function remove(id, token, username, password) {\n    if (arguments.length < 4) throw Error('All arguments were not introduced in the function');\n    if (arguments.length > 4) throw Error('Too many arguments were introduced in the function');\n    return userApi.remove(id, token, username, password);\n  },\n\n  /**\r\n   * \r\n   * Searches for recipes with the desired query.\r\n   * \r\n   * @param {string} query \r\n   * @param {string} calories\r\n   * @param {string} diet \r\n   * @param {Array} healthArray\r\n   * \r\n   * @throws {Error} - On non-existing required params\r\n   * @throws {TypeError} - On query data type different than string\r\n   */\n  search: function search(query, calories, diet, healthArray) {\n    if (calories === undefined) throw Error('Calories range was not input');\n    if (typeof calories !== 'string') throw TypeError(calories + ' is not a string');\n    var myDiet;\n\n    if (diet) {\n      if (typeof diet !== 'string') throw TypeError(diet + ' is not a string');else if (diet === 'indifferent') {\n        myDiet = '';\n      } else {\n        myDiet = '&diet=' + diet;\n      }\n    }\n\n    var health;\n\n    if (healthArray.length > 0 || healthArray.length === undefined) {\n      if (!(healthArray instanceof Array)) throw TypeError(healthArray + ' is not an array');\n      var res = [];\n      healthArray.forEach(function (element) {\n        res.push('&health=' + element);\n      });\n      health = res.join('');\n    } else {\n      health = '';\n    }\n\n    var toCalories = \"&calories=\".concat(Math.round(calories / 2), \"-\") + calories;\n    return edamamApi.search(query, toCalories, myDiet, health);\n  },\n\n  /**\r\n   * \r\n   * find the recipeUri among all the recipes\r\n   * \r\n   * @param {string} recipeUri \r\n   * @param {array} recipes \r\n   * \r\n   * @throws {Error} when recipeUri is not found in recipes\r\n   * @throws {TypeError} - On different argument types\r\n   * \r\n   * @return {Object} - Recipe found\r\n   */\n  detail: function detail(recipeUri, recipes) {\n    if (typeof recipeUri !== 'string') throw TypeError(recipeUri + ' is not a string');\n    if (!recipeUri.trim().length) throw Error(recipeUri + ' cannot be empty');\n    if (recipes.constructor !== Array) throw TypeError(recipes + ' is not an array');\n    var recipe = null;\n    recipes.find(function (element) {\n      if (element.recipe.uri === recipeUri) {\n        recipe = element;\n      }\n    });\n    if (!!recipe) return recipe;else throw Error('Details are not found');\n  },\n\n  /**\r\n   * create a fridge and shopping arrays\r\n   *\r\n   * @param {array} ingredientsRecipe \r\n   * @param {array} ingredientsQuery \r\n   * \r\n   * @throws {Error} when recipeUri is not found in recipes\r\n   * @throws {TypeError} - On different arguments types\r\n   * \r\n   * @return {object} - fridge and shopping creates\r\n   */\n  generateLists: function generateLists(ingredientsRecipe, ingredientsQuery) {\n    if (ingredientsRecipe.constructor !== Array) throw TypeError(ingredientsRecipe + ' is not an array');\n    if (ingredientsRecipe.length < 1) throw Error(ingredientsRecipe + ' cannot be empty');\n    if (ingredientsQuery.constructor !== Array) throw TypeError(ingredientsQuery + ' is not an array');\n    var fridge = [];\n    var shopping = [];\n    ingredientsRecipe.forEach(function (ingredientRecipe) {\n      var compare = ingredientsQuery.find(function (ingredientQuery) {\n        return ingredientRecipe.toLowerCase().includes(ingredientQuery.toLowerCase());\n      });\n      if (compare) fridge.push(ingredientRecipe);else shopping.push(ingredientRecipe);\n    });\n    if (fridge.length === 0) fridge.push('No ingredients selected');\n    return {\n      fridge: fridge,\n      shopping: shopping\n    };\n  }\n};\nexport default logic;","map":{"version":3,"sources":["C:\\Users\\lluna\\bootcamp\\collab\\los-chicotes\\skylab-bootcamp-201901\\staff\\groups\\null\\smart-fridge\\src\\logic\\index.js"],"names":["userApi","edamamApi","logic","setUserId","id","___userId___","getUserId","setUserApiToken","token","___userApiToken___","getUserApiToken","setUser","user","___user___","getUser","__userId__","__userApiToken__","__user__","userLoggedIn","logout","caloriesCounter","gender","height","weight","birthdateString","lifeStyle","birthdate","Date","cur","diff","age","Math","floor","TypeError","trim","length","Error","totalCalories","bmr","round","toggleFavourite","recipe","retrieve","then","favourites","JSON","parse","includeRecipe","find","r","uri","push","filter","update","register","name","surname","username","password","passwordConfirm","birthDate","arguments","login","email","authenticate","data","remove","search","query","calories","diet","healthArray","undefined","myDiet","health","Array","res","forEach","element","join","toCalories","detail","recipeUri","recipes","constructor","generateLists","ingredientsRecipe","ingredientsQuery","fridge","shopping","ingredientRecipe","compare","ingredientQuery","toLowerCase","includes"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,aAApB;AACA,OAAOC,SAAP,MAAsB,eAAtB;AACA;;;;AAGA,IAAMC,KAAK,GAAG;AACVC,EAAAA,SADU,qBACAC,EADA,EACI;AACV,SAAKC,YAAL,GAAoBD,EAApB;AACH,GAHS;AAKVE,EAAAA,SALU,uBAKE;AACR,WAAO,KAAKD,YAAZ;AACH,GAPS;AASVE,EAAAA,eATU,2BASMC,KATN,EASa;AACnB,SAAKC,kBAAL,GAA0BD,KAA1B;AACH,GAXS;AAaVE,EAAAA,eAbU,6BAaQ;AACd,WAAO,KAAKD,kBAAZ;AACH,GAfS;AAiBVE,EAAAA,OAjBU,mBAiBFC,IAjBE,EAiBI;AACV,SAAKC,UAAL,GAAkBD,IAAlB;AACH,GAnBS;AAqBVE,EAAAA,OArBU,qBAqBA;AACN,WAAO,KAAKD,UAAZ;AACH,GAvBS;;AAyBV,MAAIE,UAAJ,CAAeX,EAAf,EAAmB;AACf,SAAKD,SAAL,CAAeC,EAAf;AACH,GA3BS;;AA6BV,MAAIW,UAAJ,GAAiB;AACb,WAAO,KAAKT,SAAL,EAAP;AACH,GA/BS;;AAiCV,MAAIU,gBAAJ,CAAqBR,KAArB,EAA4B;AACxB,SAAKD,eAAL,CAAqBC,KAArB;AACH,GAnCS;;AAqCV,MAAIQ,gBAAJ,GAAuB;AACnB,WAAO,KAAKN,eAAL,EAAP;AACH,GAvCS;;AAyCV,MAAIO,QAAJ,CAAaL,IAAb,EAAmB;AACf,SAAKD,OAAL,CAAaC,IAAb;AACH,GA3CS;;AA6CV,MAAIK,QAAJ,GAAe;AACX,WAAO,KAAKH,OAAL,EAAP;AACH,GA/CS;;AAiDV,MAAII,YAAJ,GAAmB;AACf,WAAQ,CAAC,CAAC,KAAKH,UAAP,IAAqB,CAAC,CAAC,KAAKC,gBAApC;AACH,GAnDS;;AAqDVG,EAAAA,MArDU,oBAqDD;AACL,SAAKJ,UAAL,GAAkB,IAAlB;AACA,SAAKC,gBAAL,GAAwB,IAAxB;AACA,SAAKC,QAAL,GAAgB,IAAhB;AACH,GAzDS;;AA0DV;;;;;;;;;;;;;AAaAG,EAAAA,eAvEU,2BAuEMC,MAvEN,EAuEcC,MAvEd,EAuEsBC,MAvEtB,EAuE8BC,eAvE9B,EAuE+CC,SAvE/C,EAuE0D;AAEhE,QAAMC,SAAS,GAAG,IAAIC,IAAJ,CAASH,eAAT,CAAlB;AACA,QAAMI,GAAG,GAAG,IAAID,IAAJ,EAAZ;AACA,QAAME,IAAI,GAAGD,GAAG,GAACF,SAAjB,CAJgE,CAIpC;;AAC5B,QAAMI,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAI,GAAC,WAAhB,CAAZ;AAEA,QAAI,OAAOR,MAAP,KAAkB,QAAtB,EAAgC,MAAMY,SAAS,CAACZ,MAAM,GAAG,kBAAV,CAAf;AAEhC,QAAI,CAACA,MAAM,CAACa,IAAP,GAAcC,MAAnB,EAA2B,MAAMC,KAAK,CAAC,wBAAD,CAAX;AAE3B,QAAI,OAAOd,MAAP,KAAkB,QAAtB,EAAgC,MAAMW,SAAS,CAACX,MAAM,GAAG,kBAAV,CAAf;AAEhC,QAAI,EAAE,KAAKA,MAAL,IAAeA,MAAM,GAAG,GAA1B,CAAJ,EAAoC,MAAMc,KAAK,CAACd,MAAM,GAAG,wCAAV,CAAX;AAEpC,QAAI,OAAOC,MAAP,KAAkB,QAAtB,EAAgC,MAAMU,SAAS,CAACV,MAAM,GAAG,kBAAV,CAAf;AAEhC,QAAI,EAAE,KAAKA,MAAL,IAAeA,MAAM,GAAG,GAA1B,CAAJ,EAAoC,MAAMa,KAAK,CAACb,MAAM,GAAG,wCAAV,CAAX;AAEpC,QAAI,OAAOC,eAAP,KAA2B,QAA/B,EAAyC,MAAMS,SAAS,CAACT,eAAe,GAAG,kBAAnB,CAAf;AAEzC,QAAI,CAACA,eAAe,CAACU,IAAhB,GAAuBC,MAA5B,EAAoC,MAAMC,KAAK,CAAC,2BAAD,CAAX;AAEpC,QAAI,OAAON,GAAP,KAAe,QAAnB,EAA6B,MAAMG,SAAS,CAACH,GAAG,GAAG,kBAAP,CAAf;AAE7B,QAAI,EAAE,KAAKA,GAAL,IAAYA,GAAG,GAAG,GAApB,CAAJ,EAA8B,MAAMM,KAAK,CAACN,GAAG,GAAG,6BAAP,CAAX;AAE9B,QAAI,OAAOL,SAAP,KAAqB,QAAzB,EAAmC,MAAMQ,SAAS,CAACR,SAAS,GAAG,kBAAb,CAAf;AAEnC,QAAI,CAACA,SAAS,CAACS,IAAV,GAAiBC,MAAtB,EAA8B,MAAMC,KAAK,CAAC,2BAAD,CAAX;AAG9B,QAAIC,aAAJ;;AAEA,QAAGhB,MAAM,KAAK,MAAd,EAAqB;AACjB,UAAMiB,GAAG,GAAK,KAAKf,MAAN,GAAiB,OAAOD,MAAxB,GAAmC,IAAIQ,GAAvC,GAA8C,CAA3D;;AAEA,UAAGL,SAAS,KAAK,WAAjB,EAA6B;AACzBY,QAAAA,aAAa,GAAIC,GAAG,GAAG,IAAvB;AAEH,OAHD,MAGM,IAAGb,SAAS,KAAK,QAAjB,EAA0B;AAE5BY,QAAAA,aAAa,GAAIC,GAAG,GAAG,IAAvB;AAEH,OAJK,MAID;AACDD,QAAAA,aAAa,GAAIC,GAAG,GAAG,IAAvB;AACH;AAEJ,KAdD,MAcM,IAAGjB,MAAM,KAAK,QAAd,EAAwB;AAC1B,UAAMiB,IAAG,GAAI,KAAKf,MAAN,GAAiB,OAAOD,MAAxB,GAAmC,IAAIQ,GAAvC,GAA8C,GAA1D;;AAEA,UAAGL,SAAS,KAAK,WAAjB,EAA6B;AAEzBY,QAAAA,aAAa,GAAIC,IAAG,GAAG,IAAvB;AAEH,OAJD,MAIM,IAAGb,SAAS,KAAK,QAAjB,EAA0B;AAC5BY,QAAAA,aAAa,GAAIC,IAAG,GAAG,IAAvB;AAEH,OAHK,MAGD;AACDD,QAAAA,aAAa,GAAIC,IAAG,GAAG,IAAvB;AACH;AACJ;;AACD,WAAOP,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACQ,KAAL,CAAWF,aAAX,CAAX,CAAP;AACH,GAtIS;;AAuIV;;;;;;;;;AASAG,EAAAA,eAhJU,2BAgJMpC,EAhJN,EAgJUI,KAhJV,EAgJiBiC,MAhJjB,EAgJyB;AAAA;;AAC/B,WAAO,KAAKC,QAAL,CAActC,EAAd,EAAkBI,KAAlB,EACFmC,IADE,CACG,YAAM;AACR,UAAIC,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAW,KAAI,CAAC7B,QAAhB,EAA0B2B,UAA3C;AACA,UAAIG,aAAa,GAAGH,UAAU,CAACI,IAAX,CAAgB,UAAAC,CAAC;AAAA,eAAIR,MAAM,CAACA,MAAP,CAAcS,GAAd,KAAsBD,CAAC,CAACR,MAAF,CAASS,GAAnC;AAAA,OAAjB,CAApB;;AACA,UAAI,CAACH,aAAL,EAAoB;AAChBH,QAAAA,UAAU,CAACO,IAAX,CAAgBV,MAAhB;AACH,OAFD,MAEO;AACHG,QAAAA,UAAU,GAAGA,UAAU,CAACQ,MAAX,CAAkB,UAAAH,CAAC;AAAA,iBAAIR,MAAM,CAACA,MAAP,CAAcS,GAAd,KAAsBD,CAAC,CAACR,MAAF,CAASS,GAAnC;AAAA,SAAnB,CAAb;AACH;;AACDL,MAAAA,IAAI,CAACC,KAAL,CAAW,KAAI,CAAC7B,QAAhB,EAA0B2B,UAA1B,GAAuCA,UAAvC;AAEA,aAAO,KAAI,CAACS,MAAL,CAAYjD,EAAZ,EAAgBI,KAAhB,EAAuB;AAACoC,QAAAA,UAAU,EAAVA;AAAD,OAAvB,CAAP;AAEH,KAbE,EAcFD,IAdE,CAcG;AAAA,aAAM,KAAI,CAACD,QAAL,CAActC,EAAd,EAAkBI,KAAlB,CAAN;AAAA,KAdH,CAAP;AAeC,GAhKK;;AAiKV;;;;;;;;;;;;;;;;;AAiBA8C,EAAAA,QAlLU,oBAkLDC,IAlLC,EAkLKC,OAlLL,EAkLcC,QAlLd,EAkLwBC,QAlLxB,EAkLkCC,eAlLlC,EAkLmDtC,MAlLnD,EAkL2DC,MAlL3D,EAkLmEC,MAlLnE,EAkL2EqC,SAlL3E,EAkLsFnC,SAlLtF,EAkLiG;AAAA;;AAEvG,QAAMC,SAAS,GAAG,IAAIC,IAAJ,CAASiC,SAAT,CAAlB;AACA,QAAMhC,GAAG,GAAG,IAAID,IAAJ,EAAZ;AACA,QAAME,IAAI,GAAGD,GAAG,GAACF,SAAjB,CAJuG,CAI3E;;AAC5B,QAAMI,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAI,GAAC,WAAhB,CAAZ;AAEA,QAAIgC,SAAS,CAAC1B,MAAV,GAAmB,EAAvB,EAA2B,MAAMC,KAAK,CAAC,mDAAD,CAAX;AAE3B,QAAIyB,SAAS,CAAC1B,MAAV,GAAmB,EAAvB,EAA2B,MAAMC,KAAK,CAAC,oDAAD,CAAX;AAE3B,QAAI,OAAOf,MAAP,KAAkB,QAAtB,EAAgC,MAAMY,SAAS,CAACZ,MAAM,GAAG,kBAAV,CAAf;AAEhC,QAAI,CAACA,MAAM,CAACa,IAAP,GAAcC,MAAnB,EAA2B,MAAMC,KAAK,CAAC,wBAAD,CAAX;AAE3B,QAAI,OAAOd,MAAP,KAAkB,QAAtB,EAAgC,MAAMW,SAAS,CAACX,MAAM,GAAG,kBAAV,CAAf;AAEhC,QAAI,EAAE,KAAKA,MAAL,IAAeA,MAAM,GAAG,GAA1B,CAAJ,EAAoC,MAAMc,KAAK,CAAC,8CAAD,CAAX;AAEpC,QAAI,OAAOb,MAAP,KAAkB,QAAtB,EAAgC,MAAMU,SAAS,CAACV,MAAM,GAAG,kBAAV,CAAf;AAEhC,QAAI,EAAE,KAAKA,MAAL,IAAeA,MAAM,GAAG,GAA1B,CAAJ,EAAoC,MAAMa,KAAK,CAAC,mDAAD,CAAX;AAEpC,QAAI,OAAOwB,SAAP,KAAqB,QAAzB,EAAmC,MAAM3B,SAAS,CAAC2B,SAAS,GAAG,kBAAb,CAAf;AAEnC,QAAI,CAACA,SAAS,CAAC1B,IAAV,GAAiBC,MAAtB,EAA8B,MAAMC,KAAK,CAAC,2BAAD,CAAX;AAE9B,QAAI,OAAON,GAAP,KAAe,QAAnB,EAA6B,MAAMG,SAAS,CAACH,GAAG,GAAG,kBAAP,CAAf;AAE7B,QAAI,EAAE,KAAKA,GAAL,IAAYA,GAAG,GAAG,GAApB,CAAJ,EAA8B,MAAMM,KAAK,CAAC,qCAAD,CAAX;AAE9B,QAAI,OAAOX,SAAP,KAAqB,QAAzB,EAAmC,MAAMQ,SAAS,CAACR,SAAS,GAAG,kBAAb,CAAf;AAEnC,QAAI,CAACA,SAAS,CAACS,IAAV,GAAiBC,MAAtB,EAA8B,MAAMC,KAAK,CAAC,2BAAD,CAAX;AAG9B,WAAOpC,OAAO,CAACsD,QAAR,CAAiBC,IAAjB,EAAuBC,OAAvB,EAAgCC,QAAhC,EAA0CC,QAA1C,EAAoDC,eAApD,EAAqEtC,MAArE,EAA6EuC,SAA7E,EAAwFtC,MAAxF,EAAgGC,MAAhG,EAAwGE,SAAxG,EACFkB,IADE,CACG,UAAAvC,EAAE,EAAI;AACR,MAAA,MAAI,CAACW,UAAL,GAAkBX,EAAlB;AACH,KAHE,CAAP;AAIH,GA1NS;;AA2NV;;;;;;;;;AASA0D,EAAAA,KApOU,iBAoOJC,KApOI,EAoOGL,QApOH,EAoOa;AAAA;;AAEnB,QAAIG,SAAS,CAAC1B,MAAV,GAAmB,CAAvB,EAA0B,MAAMC,KAAK,CAAC,mDAAD,CAAX;AAE1B,QAAIyB,SAAS,CAAC1B,MAAV,GAAmB,CAAvB,EAA0B,MAAMC,KAAK,CAAC,oDAAD,CAAX;AAE1B,WAAOpC,OAAO,CAACgE,YAAR,CAAqBD,KAArB,EAA4BL,QAA5B,EACFf,IADE,CACG,gBAAmB;AAAA,UAAhBvC,EAAgB,QAAhBA,EAAgB;AAAA,UAAZI,KAAY,QAAZA,KAAY;AACrB,MAAA,MAAI,CAACO,UAAL,GAAkBX,EAAlB;AACA,MAAA,MAAI,CAACY,gBAAL,GAAwBR,KAAxB;AACH,KAJE,CAAP;AAKH,GA/OS;;AAgPV;;;;;;;;;AASAkC,EAAAA,QAzPU,oBAyPDtC,EAzPC,EAyPGI,KAzPH,EAyPU;AAAA;;AAEhB,QAAIqD,SAAS,CAAC1B,MAAV,GAAmB,CAAvB,EAA0B,MAAMC,KAAK,CAAC,mDAAD,CAAX;AAE1B,QAAIyB,SAAS,CAAC1B,MAAV,GAAmB,CAAvB,EAA0B,MAAMC,KAAK,CAAC,oDAAD,CAAX;AAE1B,WAAOpC,OAAO,CAAC0C,QAAR,CAAiBtC,EAAjB,EAAqBI,KAArB,EACFmC,IADE,CACG,UAAC/B,IAAD,EAAU;AACZ,MAAA,MAAI,CAACK,QAAL,GAAgBL,IAAhB;AACH,KAHE,CAAP;AAIH,GAnQS;;AAoQV;;;;;;;;;;AAUAyC,EAAAA,MA9QU,kBA8QHjD,EA9QG,EA8QCI,KA9QD,EA8QQyD,IA9QR,EA8Qc;AACpB,QAAIJ,SAAS,CAAC1B,MAAV,GAAmB,CAAvB,EAA0B,MAAMC,KAAK,CAAC,mDAAD,CAAX;AAE1B,QAAIyB,SAAS,CAAC1B,MAAV,GAAmB,CAAvB,EAA0B,MAAMC,KAAK,CAAC,oDAAD,CAAX;AAE1B,WAAOpC,OAAO,CAACqD,MAAR,CAAejD,EAAf,EAAmBI,KAAnB,EAA0ByD,IAA1B,CAAP;AACH,GApRS;;AAqRV;;;;;;;;;;;AAWAC,EAAAA,MAhSU,kBAgSH9D,EAhSG,EAgSCI,KAhSD,EAgSQiD,QAhSR,EAgSkBC,QAhSlB,EAgS4B;AAClC,QAAIG,SAAS,CAAC1B,MAAV,GAAmB,CAAvB,EAA0B,MAAMC,KAAK,CAAC,mDAAD,CAAX;AAE1B,QAAIyB,SAAS,CAAC1B,MAAV,GAAmB,CAAvB,EAA0B,MAAMC,KAAK,CAAC,oDAAD,CAAX;AAE1B,WAAOpC,OAAO,CAACkE,MAAR,CAAe9D,EAAf,EAAmBI,KAAnB,EAA0BiD,QAA1B,EAAoCC,QAApC,CAAP;AACH,GAtSS;;AAuSV;;;;;;;;;;;;AAYAS,EAAAA,MAnTU,kBAmTHC,KAnTG,EAmTIC,QAnTJ,EAmTcC,IAnTd,EAmToBC,WAnTpB,EAmTiC;AAGvC,QAAIF,QAAQ,KAAKG,SAAjB,EAA4B,MAAMpC,KAAK,CAAC,8BAAD,CAAX;AAE5B,QAAI,OAAOiC,QAAP,KAAoB,QAAxB,EAAkC,MAAMpC,SAAS,CAACoC,QAAQ,GAAG,kBAAZ,CAAf;AAElC,QAAII,MAAJ;;AAEA,QAAIH,IAAJ,EAAU;AACN,UAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B,MAAMrC,SAAS,CAACqC,IAAI,GAAG,kBAAR,CAAf,CAA9B,KAEK,IAAIA,IAAI,KAAK,aAAb,EAA4B;AAC7BG,QAAAA,MAAM,GAAG,EAAT;AACH,OAFI,MAEE;AACHA,QAAAA,MAAM,GAAG,WAAWH,IAApB;AACH;AACJ;;AAED,QAAII,MAAJ;;AAEA,QAAIH,WAAW,CAACpC,MAAZ,GAAqB,CAArB,IAA0BoC,WAAW,CAACpC,MAAZ,KAAuBqC,SAArD,EAAgE;AAC5D,UAAI,EAAED,WAAW,YAAYI,KAAzB,CAAJ,EAAqC,MAAM1C,SAAS,CAACsC,WAAW,GAAG,kBAAf,CAAf;AACrC,UAAMK,GAAG,GAAG,EAAZ;AAEAL,MAAAA,WAAW,CAACM,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC3BF,QAAAA,GAAG,CAACzB,IAAJ,CAAS,aAAa2B,OAAtB;AACH,OAFD;AAIAJ,MAAAA,MAAM,GAAGE,GAAG,CAACG,IAAJ,CAAS,EAAT,CAAT;AACH,KATD,MASO;AACHL,MAAAA,MAAM,GAAG,EAAT;AACH;;AAED,QAAMM,UAAU,GAAG,oBAAajD,IAAI,CAACQ,KAAL,CAAW8B,QAAQ,GAAC,CAApB,CAAb,SAAyCA,QAA5D;AAEA,WAAOpE,SAAS,CAACkE,MAAV,CAAiBC,KAAjB,EAAwBY,UAAxB,EAAoCP,MAApC,EAA4CC,MAA5C,CAAP;AACH,GAxVS;;AA0Vd;;;;;;;;;;;;AAYIO,EAAAA,MAtWU,kBAsWHC,SAtWG,EAsWQC,OAtWR,EAsWgB;AAEtB,QAAI,OAAOD,SAAP,KAAqB,QAAzB,EAAmC,MAAMjD,SAAS,CAACiD,SAAS,GAAG,kBAAb,CAAf;AAEnC,QAAI,CAACA,SAAS,CAAChD,IAAV,GAAiBC,MAAtB,EAA8B,MAAMC,KAAK,CAAC8C,SAAS,GAAG,kBAAb,CAAX;AAE9B,QAAIC,OAAO,CAACC,WAAR,KAAwBT,KAA5B,EAAmC,MAAM1C,SAAS,CAACkD,OAAO,GAAG,kBAAX,CAAf;AAEnC,QAAI1C,MAAM,GAAC,IAAX;AAEA0C,IAAAA,OAAO,CAACnC,IAAR,CAAc,UAAA8B,OAAO,EAAI;AACrB,UAAGA,OAAO,CAACrC,MAAR,CAAeS,GAAf,KAAqBgC,SAAxB,EAAkC;AAC9BzC,QAAAA,MAAM,GAACqC,OAAP;AACH;AACJ,KAJD;AAKA,QAAI,CAAC,CAACrC,MAAN,EAAc,OAAOA,MAAP,CAAd,KACK,MAAML,KAAK,CAAC,uBAAD,CAAX;AACR,GAvXS;;AAyXZ;;;;;;;;;;;AAWEiD,EAAAA,aApYU,yBAoYIC,iBApYJ,EAoYuBC,gBApYvB,EAoYwC;AAE9C,QAAID,iBAAiB,CAACF,WAAlB,KAAkCT,KAAtC,EAA6C,MAAM1C,SAAS,CAACqD,iBAAiB,GAAG,kBAArB,CAAf;AAE7C,QAAIA,iBAAiB,CAACnD,MAAlB,GAA0B,CAA9B,EAAiC,MAAMC,KAAK,CAACkD,iBAAiB,GAAG,kBAArB,CAAX;AAEjC,QAAIC,gBAAgB,CAACH,WAAjB,KAAiCT,KAArC,EAA4C,MAAM1C,SAAS,CAACsD,gBAAgB,GAAG,kBAApB,CAAf;AAE5C,QAAIC,MAAM,GAAE,EAAZ;AACA,QAAIC,QAAQ,GAAC,EAAb;AAEAH,IAAAA,iBAAiB,CAACT,OAAlB,CAA0B,UAAAa,gBAAgB,EAAE;AACxC,UAAIC,OAAO,GAAEJ,gBAAgB,CAACvC,IAAjB,CAAsB,UAAA4C,eAAe,EAAE;AAChD,eAAOF,gBAAgB,CAACG,WAAjB,GAA+BC,QAA/B,CAAwCF,eAAe,CAACC,WAAhB,EAAxC,CAAP;AACH,OAFY,CAAb;AAGA,UAAIF,OAAJ,EAAaH,MAAM,CAACrC,IAAP,CAAYuC,gBAAZ,EAAb,KACKD,QAAQ,CAACtC,IAAT,CAAcuC,gBAAd,CAAD;AACP,KAND;AAQA,QAAIF,MAAM,CAACrD,MAAP,KAAgB,CAApB,EAAuBqD,MAAM,CAACrC,IAAP,CAAY,yBAAZ;AAEvB,WAAO;AAACqC,MAAAA,MAAM,EAANA,MAAD;AAASC,MAAAA,QAAQ,EAARA;AAAT,KAAP;AACH;AA1ZS,CAAd;AA6ZA,eAAevF,KAAf","sourcesContent":["import userApi from '../user-api'\r\nimport edamamApi from '../edamam-api'\r\n/**\r\n * Logic for the smart-fridge app\r\n */\r\nconst logic = {\r\n    setUserId(id) {\r\n        this.___userId___ = id\r\n    },\r\n\r\n    getUserId() {\r\n        return this.___userId___\r\n    },\r\n\r\n    setUserApiToken(token) {\r\n        this.___userApiToken___ = token\r\n    },\r\n\r\n    getUserApiToken() {\r\n        return this.___userApiToken___\r\n    },\r\n\r\n    setUser(user) {\r\n        this.___user___ = user\r\n    },\r\n\r\n    getUser() {\r\n        return this.___user___\r\n    },\r\n\r\n    set __userId__(id) {\r\n        this.setUserId(id)\r\n    },\r\n\r\n    get __userId__() {\r\n        return this.getUserId()\r\n    },\r\n\r\n    set __userApiToken__(token) {\r\n        this.setUserApiToken(token)\r\n    },\r\n\r\n    get __userApiToken__() {\r\n        return this.getUserApiToken()\r\n    },\r\n\r\n    set __user__(user) {\r\n        this.setUser(user)\r\n    },\r\n\r\n    get __user__() {\r\n        return this.getUser()\r\n    },\r\n\r\n    get userLoggedIn() {\r\n        return (!!this.__userId__ && !!this.__userApiToken__)\r\n    },\r\n\r\n    logout() {\r\n        this.__userId__ = null\r\n        this.__userApiToken__ = null\r\n        this.__user__ = null\r\n    },\r\n    /**\r\n     * Calculate the total amount of daily calories that the user needs based on his params.\r\n     *\r\n     * @param {string} gender\r\n     * @param {number} height - cm\r\n     * @param {number} weight - Kg\r\n     * @param {string} birthYear - Y/M/D\r\n     * @param {string} lifeStyle\r\n     * \r\n     * @throws {Error} - On empty values\r\n     * @throws {TypeError} - On different data types\r\n     *\r\n     */\r\n    caloriesCounter(gender, height, weight, birthdateString, lifeStyle) { \r\n\r\n        const birthdate = new Date(birthdateString);\r\n        const cur = new Date();\r\n        const diff = cur-birthdate; // This is the difference in milliseconds\r\n        const age = Math.floor(diff/31557600000); \r\n\r\n        if (typeof gender !== 'string') throw TypeError(gender + ' is not a string')\r\n\r\n        if (!gender.trim().length) throw Error('gender cannot be empty')\r\n\r\n        if (typeof height !== 'number') throw TypeError(height + ' is not a number')\r\n\r\n        if (!(50 < height && height < 250)) throw Error(height + ' should be a number between 50 and 230')\r\n\r\n        if (typeof weight !== 'number') throw TypeError(weight + ' is not a number')\r\n\r\n        if (!(20 < weight && weight < 400)) throw Error(weight + ' should be a number between 20 and 400')\r\n \r\n        if (typeof birthdateString !== 'string') throw TypeError(birthdateString + ' is not a string')\r\n        \r\n        if (!birthdateString.trim().length) throw Error('birthDate cannot be empty')\r\n        \r\n        if (typeof age !== 'number') throw TypeError(age + ' is not a number')\r\n\r\n        if (!(15 < age && age < 120)) throw Error(age + ' must be between 15 and 120')\r\n        \r\n        if (typeof lifeStyle !== 'string') throw TypeError(lifeStyle + ' is not a string')\r\n        \r\n        if (!lifeStyle.trim().length) throw Error('lifeStyle cannot be empty')\r\n        \r\n\r\n        var totalCalories\r\n        \r\n        if(gender === \"male\"){\r\n            const bmr =  (10 * weight) + (6.25 * height) - (5 * age) + 5\r\n            \r\n            if(lifeStyle === \"sedentary\"){\r\n                totalCalories =  bmr * 1.53\r\n\r\n            }else if(lifeStyle === \"active\"){\r\n\r\n                totalCalories =  bmr * 1.76\r\n\r\n            }else{\r\n                totalCalories =  bmr * 2.25\r\n            }\r\n\r\n        }else if(gender === \"female\") {\r\n            const bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161\r\n\r\n            if(lifeStyle === \"sedentary\"){\r\n\r\n                totalCalories =  bmr * 1.53\r\n\r\n            }else if(lifeStyle === \"active\"){\r\n                totalCalories =  bmr * 1.76\r\n\r\n            }else{\r\n                totalCalories =  bmr * 2.25\r\n            }\r\n        }    \r\n        return Math.floor(Math.round(totalCalories)) \r\n    },\r\n    /**\r\n    * \r\n    * Toggles between pushing and deleting a song to the array of favourite songs in the property favourites of user.\r\n    * \r\n    * @param {string} id\r\n    * @param {string} token \r\n    * @param {object} recipe\r\n    * \r\n    */\r\n    toggleFavourite(id, token, recipe) {\r\n        return this.retrieve(id, token)\r\n            .then(() => {\r\n                let favourites = JSON.parse(this.__user__).favourites\r\n                let includeRecipe = favourites.find(r => recipe.recipe.uri === r.recipe.uri)\r\n                if (!includeRecipe) {\r\n                    favourites.push(recipe)\r\n                } else {\r\n                    favourites = favourites.filter(r => recipe.recipe.uri !== r.recipe.uri)\r\n                }\r\n                JSON.parse(this.__user__).favourites = favourites\r\n                \r\n                return this.update(id, token, {favourites})\r\n                \r\n            })\r\n            .then(() => this.retrieve(id, token))\r\n        },\r\n    /**\r\n     * \r\n     * Registers a user.\r\n     * \r\n     * @param {string} name \r\n     * @param {string} surname \r\n     * @param {string} username \r\n     * @param {string} password \r\n     * @param {string} passwordConfirm \r\n     * @param {string} gender \r\n     * @param {number} height \r\n     * @param {number} weight \r\n     * @param {string} birthDate \r\n     * @param {string} lifeStyle \r\n     * \r\n     * @throws {Error} - When length of arguments differs from 10\r\n     */\r\n    register(name, surname, username, password, passwordConfirm, gender, height, weight, birthDate, lifeStyle) {\r\n\r\n        const birthdate = new Date(birthDate);\r\n        const cur = new Date();\r\n        const diff = cur-birthdate; // This is the difference in milliseconds\r\n        const age = Math.floor(diff/31557600000); \r\n\r\n        if (arguments.length < 10) throw Error('All arguments were not introduced in the function')\r\n\r\n        if (arguments.length > 10) throw Error('Too many arguments were introduced in the function')\r\n\r\n        if (typeof gender !== 'string') throw TypeError(gender + ' is not a string')\r\n\r\n        if (!gender.trim().length) throw Error('gender cannot be empty')\r\n\r\n        if (typeof height !== 'number') throw TypeError(height + ' is not a number')\r\n\r\n        if (!(50 < height && height < 250)) throw Error('height should be a number between 50 and 230')\r\n\r\n        if (typeof weight !== 'number') throw TypeError(weight + ' is not a number')\r\n\r\n        if (!(20 < weight && weight < 400)) throw Error('your weight should be a number between 20 and 400')\r\n \r\n        if (typeof birthDate !== 'string') throw TypeError(birthDate + ' is not a string')\r\n        \r\n        if (!birthDate.trim().length) throw Error('birthDate cannot be empty')\r\n        \r\n        if (typeof age !== 'number') throw TypeError(age + ' is not a number')\r\n\r\n        if (!(15 < age && age < 120)) throw Error('your age must be between 15 and 120')\r\n        \r\n        if (typeof lifeStyle !== 'string') throw TypeError(lifeStyle + ' is not a string')\r\n        \r\n        if (!lifeStyle.trim().length) throw Error('lifeStyle cannot be empty')\r\n \r\n\r\n        return userApi.register(name, surname, username, password, passwordConfirm, gender, birthDate, height, weight, lifeStyle)\r\n            .then(id => {\r\n                this.__userId__ = id\r\n            })\r\n    },\r\n    /**\r\n     * \r\n     * Logs In a user.\r\n     * \r\n     * @param {string} email \r\n     * @param {string} password \r\n     * \r\n     * @throws {Error} - When length of arguments differs from 2\r\n     */\r\n    login(email, password) {\r\n\r\n        if (arguments.length < 2) throw Error('All arguments were not introduced in the function')\r\n\r\n        if (arguments.length > 2) throw Error('Too many arguments were introduced in the function')\r\n\r\n        return userApi.authenticate(email, password)\r\n            .then(({ id, token }) => {\r\n                this.__userId__ = id\r\n                this.__userApiToken__ = token\r\n            })\r\n    },\r\n    /**\r\n     * \r\n     * Retrieves data of a user.\r\n     * \r\n     * @param {string} id \r\n     * @param {string} token \r\n     * \r\n     * @throws {Error} - When length of arguments differs from 2\r\n     */\r\n    retrieve(id, token) {\r\n\r\n        if (arguments.length < 2) throw Error('All arguments were not introduced in the function')\r\n\r\n        if (arguments.length > 2) throw Error('Too many arguments were introduced in the function')\r\n\r\n        return userApi.retrieve(id, token)\r\n            .then((user) => {\r\n                this.__user__ = user\r\n            })\r\n    },\r\n    /**\r\n     * \r\n     * Updates user information.\r\n     * \r\n     * @param {string} id \r\n     * @param {string} token \r\n     * @param {object} data \r\n     * \r\n     * @throws {Error} - When length of arguments differs from 3\r\n     */\r\n    update(id, token, data) {\r\n        if (arguments.length < 3) throw Error('All arguments were not introduced in the function')\r\n\r\n        if (arguments.length > 3) throw Error('Too many arguments were introduced in the function')\r\n\r\n        return userApi.update(id, token, data)\r\n    },\r\n    /**\r\n     * \r\n     * Removes a user from the database.\r\n     * \r\n     * @param {string} id \r\n     * @param {string} token \r\n     * @param {string} username \r\n     * @param {string} password \r\n     * \r\n     * @throws {Error} - When length of arguments differs from 4\r\n     */\r\n    remove(id, token, username, password) {\r\n        if (arguments.length < 4) throw Error('All arguments were not introduced in the function')\r\n\r\n        if (arguments.length > 4) throw Error('Too many arguments were introduced in the function')\r\n\r\n        return userApi.remove(id, token, username, password)\r\n    }, \r\n    /**\r\n     * \r\n     * Searches for recipes with the desired query.\r\n     * \r\n     * @param {string} query \r\n     * @param {string} calories\r\n     * @param {string} diet \r\n     * @param {Array} healthArray\r\n     * \r\n     * @throws {Error} - On non-existing required params\r\n     * @throws {TypeError} - On query data type different than string\r\n     */\r\n    search(query, calories, diet, healthArray) {\r\n\r\n        \r\n        if (calories === undefined) throw Error('Calories range was not input')\r\n        \r\n        if (typeof calories !== 'string') throw TypeError(calories + ' is not a string')\r\n\r\n        let myDiet\r\n        \r\n        if (diet) {\r\n            if (typeof diet !== 'string') throw TypeError(diet + ' is not a string')\r\n\r\n            else if (diet === 'indifferent') {\r\n                myDiet = ''\r\n            } else {\r\n                myDiet = '&diet=' + diet\r\n            }\r\n        }\r\n        \r\n        let health\r\n\r\n        if (healthArray.length > 0 || healthArray.length === undefined) {\r\n            if (!(healthArray instanceof Array)) throw TypeError(healthArray + ' is not an array')\r\n            const res = []\r\n            \r\n            healthArray.forEach(element => {\r\n                res.push('&health=' + element)\r\n            });\r\n            \r\n            health = res.join('')\r\n        } else {\r\n            health = ''\r\n        }\r\n        \r\n        const toCalories = `&calories=${Math.round(calories/2)}-` + calories\r\n\r\n        return edamamApi.search(query, toCalories, myDiet, health)\r\n    },\r\n\r\n/**\r\n * \r\n * find the recipeUri among all the recipes\r\n * \r\n * @param {string} recipeUri \r\n * @param {array} recipes \r\n * \r\n * @throws {Error} when recipeUri is not found in recipes\r\n * @throws {TypeError} - On different argument types\r\n * \r\n * @return {Object} - Recipe found\r\n */\r\n    detail(recipeUri, recipes){\r\n\r\n        if (typeof recipeUri !== 'string') throw TypeError(recipeUri + ' is not a string')\r\n\r\n        if (!recipeUri.trim().length) throw Error(recipeUri + ' cannot be empty')\r\n\r\n        if (recipes.constructor !== Array) throw TypeError(recipes + ' is not an array')\r\n\r\n        let recipe=null\r\n        \r\n        recipes.find( element => {\r\n            if(element.recipe.uri===recipeUri){\r\n                recipe=element\r\n            }\r\n        })\r\n        if (!!recipe) return recipe\r\n        else throw Error('Details are not found')\r\n    },\r\n\r\n  /**\r\n   * create a fridge and shopping arrays\r\n   *\r\n   * @param {array} ingredientsRecipe \r\n   * @param {array} ingredientsQuery \r\n   * \r\n   * @throws {Error} when recipeUri is not found in recipes\r\n   * @throws {TypeError} - On different arguments types\r\n   * \r\n   * @return {object} - fridge and shopping creates\r\n   */\r\n    generateLists(ingredientsRecipe, ingredientsQuery){\r\n\r\n        if (ingredientsRecipe.constructor !== Array) throw TypeError(ingredientsRecipe + ' is not an array')\r\n\r\n        if (ingredientsRecipe.length <1) throw Error(ingredientsRecipe + ' cannot be empty')\r\n\r\n        if (ingredientsQuery.constructor !== Array) throw TypeError(ingredientsQuery + ' is not an array')\r\n    \r\n        let fridge =[]\r\n        let shopping=[]\r\n\r\n        ingredientsRecipe.forEach(ingredientRecipe=>{\r\n            let compare= ingredientsQuery.find(ingredientQuery=>{\r\n                return ingredientRecipe.toLowerCase().includes(ingredientQuery.toLowerCase()) \r\n            })\r\n            if (compare) fridge.push(ingredientRecipe)\r\n            else(shopping.push(ingredientRecipe))\r\n        })\r\n\r\n        if (fridge.length===0) fridge.push('No ingredients selected')\r\n\r\n        return {fridge, shopping}\r\n    }\r\n}\r\n\r\nexport default logic"]},"metadata":{},"sourceType":"module"}