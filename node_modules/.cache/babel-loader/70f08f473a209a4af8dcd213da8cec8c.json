{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\lluna\\\\Desktop\\\\Progesctes-bootcamp\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\lluna\\\\Desktop\\\\Progesctes-bootcamp\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\lluna\\\\Desktop\\\\Progesctes-bootcamp\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\lluna\\\\Desktop\\\\Progesctes-bootcamp\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\lluna\\\\Desktop\\\\Progesctes-bootcamp\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\lluna\\\\Desktop\\\\Progesctes-bootcamp\\\\smart-fridge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\lluna\\\\Desktop\\\\Progesctes-bootcamp\\\\smart-fridge\\\\src\\\\Components\\\\Home\\\\index.js\";\nimport React from 'react';\nimport Nav from '../Nav';\nimport InputsFridge from '../InputsFridge';\nimport EditProfile from '../EditProfile';\nimport Results from '../Results';\nimport Detail from '../Detail';\nimport logic from '../../logic';\nimport { withRouter, Route, Redirect } from 'react-router-dom';\nimport './index.sass';\nimport FeedbackSearch from '../FeedbackSearch';\nimport Favourites from '../Favourites';\n\nvar Home =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      recipes: null,\n      searchFeedback: null,\n      recipe: null,\n      queryList: null,\n      ingredientsList: null,\n      sincronSearchFeedback: null,\n      favouritesFeedback: null,\n      favourites: null,\n      editProfileFeedback: null,\n      editInputsVisual: false,\n      detailsFrom: 'Recipes'\n    };\n\n    _this.handleOnSearch = function (query, calories, diet, health) {\n      var queryList = query.split('+'); //To get query in array\n\n      try {\n        logic.search(query, calories, diet, health).then(function (recipes) {\n          _this.setState({\n            recipes: recipes,\n            queryList: queryList,\n            editInputsVisual: true\n          }, function () {\n            return _this.props.history.push('/home/recipes');\n          });\n        }).catch(function (_ref) {\n          var message = _ref.message;\n\n          _this.setState({\n            searchFeedback: message\n          }, function () {\n            return _this.props.history.push('/home/feedback');\n          });\n        });\n      } catch (error) {\n        _this.setState({\n          sincronSearchFeedback: error.message\n        });\n      }\n    };\n\n    _this.handleLogout = function () {\n      logic.logout();\n\n      _this.setState({\n        editInputsVisual: false\n      }, function () {\n        return _this.props.history.push('/');\n      });\n    };\n\n    _this.handleEditProfileButton = function () {\n      _this.setState({\n        editInputsVisual: false\n      }, function () {\n        return _this.props.history.push('/home/profile');\n      });\n    };\n\n    _this.handleCancelButton = function () {\n      _this.setState({\n        editInputsVisual: false\n      }, function () {\n        return _this.props.history.push('/home');\n      });\n    };\n\n    _this.handleEditProfile = function (data) {\n      try {\n        logic.update(sessionStorage.getItem('user-id'), sessionStorage.getItem('user-api-token'), data).then(function () {\n          return logic.retrieve(sessionStorage.getItem('user-id'), sessionStorage.getItem('user-api-token'));\n        }).then(function () {\n          _this.setState({\n            editInputsVisual: false\n          }, function () {\n            return _this.props.history.push(\"/home\");\n          });\n        }).catch(function (error) {\n          return _this.setState({\n            editProfileFeedback: error.message\n          });\n        });\n      } catch (error) {\n        _this.setState({\n          editProfileFeedback: error.message\n        });\n      }\n    };\n\n    _this.handleGoBackSearch = function () {\n      _this.props.history.push('/home');\n\n      _this.setState({\n        recipes: null,\n        searchFeedback: null,\n        editInputsVisual: false\n      });\n    };\n\n    _this.handleEditInputs = function () {\n      _this.props.history.push('/home');\n\n      _this.setState({\n        recipes: null,\n        editInputsVisual: false\n      });\n    };\n\n    _this.handleOnDetail = function (recipeUri) {\n      var _assertThisInitialize = _assertThisInitialized(_assertThisInitialized(_this)),\n          recipes = _assertThisInitialize.state.recipes;\n\n      try {\n        var recipe = logic.detail(recipeUri, recipes);\n        var ingredientsList = logic.generateLists(recipe.recipe.ingredientLines, _this.state.queryList);\n\n        _this.setState({\n          recipe: recipe,\n          ingredientsList: ingredientsList,\n          detailsFrom: 'Recipes'\n        });\n\n        _this.props.history.push('/home/detail');\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    _this.handleOnDetailFavorites = function (recipeUri) {\n      var favorites = JSON.parse(sessionStorage.getItem('user')).favourites;\n\n      try {\n        var recipe = logic.detail(recipeUri, favorites);\n        var queryList = _this.state.queryList ? _this.state.queryList : [];\n        var ingredientsList = logic.generateLists(recipe.recipe.ingredientLines, queryList);\n\n        _this.setState({\n          recipe: recipe,\n          ingredientsList: ingredientsList,\n          detailsFrom: 'Favorites'\n        });\n\n        _this.props.history.push('/home/detail');\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    _this.handleBackToRecipes = function () {\n      _this.props.history.push('/home/recipes');\n    };\n\n    _this.handleBackToFavorites = function () {\n      _this.props.history.push(\"/home/favourites\");\n    };\n\n    _this.handleGoBackHome = function () {\n      _this.props.history.push('/home');\n    };\n\n    _this.handleOnFavourites = function (recipe) {\n      var id = sessionStorage.getItem('user-id');\n      var token = sessionStorage.getItem('user-api-token');\n      logic.retrieve(id, token).then(function () {\n        return logic.toggleFavourite(id, token, recipe);\n      }).then(function () {\n        return _this.setState({\n          favourites: JSON.parse(sessionStorage.getItem('user')).favourites\n        });\n      });\n    };\n\n    _this.handleGoToFavourites = function () {\n      _this.setState({\n        editInputsVisual: true,\n        favourites: JSON.parse(sessionStorage.getItem('user')).favourites\n      }, function () {\n        return _this.props.history.push('/home/favourites');\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          recipes = _this$state.recipes,\n          searchFeedback = _this$state.searchFeedback,\n          recipe = _this$state.recipe,\n          ingredientsList = _this$state.ingredientsList,\n          favourites = _this$state.favourites,\n          favouritesFeedback = _this$state.favouritesFeedback,\n          sincronSearchFeedback = _this$state.sincronSearchFeedback,\n          editInputsVisual = _this$state.editInputsVisual,\n          detailsFrom = _this$state.detailsFrom;\n      return React.createElement(\"main\", {\n        className: \"home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        className: \"fixed\",\n        user: this.props.user,\n        onLogout: this.handleLogout,\n        goToFavourites: this.handleGoToFavourites,\n        editProfile: this.handleEditProfileButton,\n        editInputsVisual: editInputsVisual,\n        editInputs: this.handleEditInputs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/home\",\n        render: function render() {\n          return logic.userLoggedIn ? React.createElement(InputsFridge, {\n            onSearch: _this2.handleOnSearch,\n            sincronSearchFeedback: sincronSearchFeedback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/home/profile\",\n        render: function render() {\n          return logic.userLoggedIn ? React.createElement(EditProfile, {\n            onEditProfile: _this2.handleEditProfile,\n            cancelButton: _this2.handleCancelButton,\n            feedback: _this2.props.editProfileFeedback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/home/recipes\",\n        render: function render() {\n          return logic.userLoggedIn && recipes ? React.createElement(Results, {\n            recipes: recipes,\n            onFavourite: _this2.handleOnFavourites,\n            onDetail: _this2.handleOnDetail,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 149\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 149\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/home/detail\",\n        render: function render() {\n          return logic.userLoggedIn && recipe ? React.createElement(Detail, {\n            recipe: recipe,\n            ingredients: ingredientsList,\n            onFavouriteDetail: _this2.handleOnFavourites,\n            backToRecipes: _this2.handleBackToRecipes,\n            backToFavorites: _this2.handleBackToFavorites,\n            detailsFrom: detailsFrom,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/home\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/home/feedback\",\n        render: function render() {\n          return logic.userLoggedIn && searchFeedback ? React.createElement(FeedbackSearch, {\n            goBackSearch: _this2.handleGoBackSearch,\n            message: searchFeedback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/home\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/home/favourites\",\n        render: function render() {\n          return logic.userLoggedIn && favourites ? React.createElement(Favourites, {\n            favourites: favourites,\n            goBackHome: _this2.handleGoBackHome,\n            onFavouriteTrue: _this2.handleOnFavourites,\n            message: favouritesFeedback,\n            onDetail: _this2.handleOnDetailFavorites,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/home\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport default withRouter(Home);","map":{"version":3,"sources":["C:\\Users\\lluna\\Desktop\\Progesctes-bootcamp\\smart-fridge\\src\\Components\\Home\\index.js"],"names":["React","Nav","InputsFridge","EditProfile","Results","Detail","logic","withRouter","Route","Redirect","FeedbackSearch","Favourites","Home","state","recipes","searchFeedback","recipe","queryList","ingredientsList","sincronSearchFeedback","favouritesFeedback","favourites","editProfileFeedback","editInputsVisual","detailsFrom","handleOnSearch","query","calories","diet","health","split","search","then","setState","props","history","push","catch","message","error","handleLogout","logout","handleEditProfileButton","handleCancelButton","handleEditProfile","data","update","sessionStorage","getItem","retrieve","handleGoBackSearch","handleEditInputs","handleOnDetail","recipeUri","detail","generateLists","ingredientLines","console","handleOnDetailFavorites","favorites","JSON","parse","handleBackToRecipes","handleBackToFavorites","handleGoBackHome","handleOnFavourites","id","token","toggleFavourite","handleGoToFavourites","user","userLoggedIn","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Nav from '../Nav'\r\nimport InputsFridge from '../InputsFridge'\r\nimport EditProfile from '../EditProfile'\r\nimport Results from '../Results'\r\nimport Detail from '../Detail'\r\nimport logic from '../../logic'\r\nimport { withRouter, Route, Redirect } from 'react-router-dom'\r\nimport './index.sass'\r\n\r\nimport FeedbackSearch from '../FeedbackSearch'\r\nimport Favourites from '../Favourites'\r\n\r\n\r\n\r\nclass Home extends React.Component{\r\n\r\n    state={recipes: null,  \r\n        searchFeedback: null, \r\n        recipe: null, \r\n        queryList: null, \r\n        ingredientsList: null, \r\n        sincronSearchFeedback: null, \r\n        favouritesFeedback: null,\r\n        favourites: null,\r\n        editProfileFeedback: null,\r\n        editInputsVisual: false,\r\n        detailsFrom: 'Recipes'}\r\n\r\n    handleOnSearch= (query, calories, diet, health,) => {\r\n        let queryList=query.split('+') //To get query in array\r\n        try {\r\n            logic.search(query, calories, diet, health)\r\n                .then(recipes=> {\r\n                    this.setState({recipes, queryList, editInputsVisual: true}, ()=> this.props.history.push('/home/recipes'))        \r\n                })\r\n                .catch(({message})=> {\r\n                    this.setState({searchFeedback:message}, ()=> this.props.history.push('/home/feedback'))\r\n                })\r\n\r\n        }catch(error){\r\n            this.setState({ sincronSearchFeedback: error.message })\r\n               \r\n        }\r\n    }\r\n\r\n    handleLogout= () => {\r\n       logic.logout()\r\n       this.setState({editInputsVisual:false},()=>this.props.history.push('/'))\r\n    }\r\n\r\n    handleEditProfileButton = () => {\r\n        this.setState({editInputsVisual:false},()=>this.props.history.push('/home/profile'))\r\n    }\r\n\r\n    handleCancelButton = () => {\r\n        this.setState({editInputsVisual:false},()=>this.props.history.push('/home'))\r\n    }\r\n\r\n    handleEditProfile = data =>{\r\n        try {\r\n            logic.update(sessionStorage.getItem('user-id'), sessionStorage.getItem('user-api-token') ,data)\r\n                .then (() => logic.retrieve(sessionStorage.getItem('user-id'), sessionStorage.getItem('user-api-token')))\r\n                .then (() => {\r\n                    this.setState({editInputsVisual:false},()=>this.props.history.push(`/home`))\r\n                })\r\n                .catch(error => this.setState({ editProfileFeedback: error.message }))\r\n\r\n        } catch (error) {\r\n            this.setState({ editProfileFeedback: error.message })\r\n        }\r\n\r\n    }\r\n\r\n    handleGoBackSearch=()=>{\r\n        this.props.history.push('/home')\r\n        this.setState({recipes:null, searchFeedback: null, editInputsVisual:false})\r\n    }\r\n\r\n    handleEditInputs=()=>{\r\n        this.props.history.push('/home')\r\n        this.setState({recipes: null, editInputsVisual:false})\r\n    }\r\n\r\n    handleOnDetail = recipeUri => {\r\n\r\n        const {state: {recipes}} =this\r\n     \r\n        try{\r\n            let recipe=logic.detail(recipeUri, recipes)\r\n     \r\n            let ingredientsList=logic.generateLists(recipe.recipe.ingredientLines, this.state.queryList)\r\n            this.setState({recipe, ingredientsList, detailsFrom: 'Recipes'})\r\n            this.props.history.push('/home/detail')\r\n\r\n        }catch(error){\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    handleOnDetailFavorites = recipeUri => {\r\n\r\n        let favorites= JSON.parse(sessionStorage.getItem('user')).favourites\r\n     \r\n        try{\r\n            let recipe=logic.detail(recipeUri, favorites)\r\n            let queryList=  this.state.queryList? this.state.queryList: []\r\n            let ingredientsList=logic.generateLists(recipe.recipe.ingredientLines, queryList)\r\n            this.setState({recipe, ingredientsList, detailsFrom: 'Favorites'})\r\n            this.props.history.push('/home/detail')\r\n\r\n        }catch(error){\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    handleBackToRecipes = () =>{\r\n        this.props.history.push('/home/recipes')\r\n    }\r\n\r\n    handleBackToFavorites =() =>{\r\n        this.props.history.push(\"/home/favourites\")\r\n    }\r\n\r\n    handleGoBackHome = () => {\r\n        this.props.history.push('/home')\r\n    }\r\n\r\n    handleOnFavourites = recipe => {\r\n        let id = sessionStorage.getItem('user-id')\r\n        let token = sessionStorage.getItem('user-api-token')\r\n        logic.retrieve(id, token)\r\n            .then(() => logic.toggleFavourite(id, token, recipe))\r\n            .then(() => this.setState({ favourites: JSON.parse(sessionStorage.getItem('user')).favourites}))\r\n    }\r\n\r\n    handleGoToFavourites = () => {\r\n        this.setState({ editInputsVisual:true, favourites: JSON.parse(sessionStorage.getItem('user')).favourites}, ()=> this.props.history.push('/home/favourites'))\r\n    }\r\n\r\n    render(){\r\n\r\n        const {state:{ recipes, searchFeedback, recipe, ingredientsList, favourites, favouritesFeedback, sincronSearchFeedback, editInputsVisual, detailsFrom}} =  this\r\n        \r\n        return <main className=\"home\">\r\n                <Nav className='fixed' user={this.props.user} onLogout={this.handleLogout} goToFavourites={this.handleGoToFavourites} editProfile={this.handleEditProfileButton} editInputsVisual={editInputsVisual} editInputs = {this.handleEditInputs} />\r\n                {<Route exact path=\"/home\" render={() =>  logic.userLoggedIn ? <InputsFridge onSearch={this.handleOnSearch} sincronSearchFeedback={sincronSearchFeedback}/> : <Redirect to=\"/\" />} />}\r\n                {<Route path=\"/home/profile\" render={() =>  logic.userLoggedIn ? <EditProfile onEditProfile={this.handleEditProfile} cancelButton={this.handleCancelButton} feedback={this.props.editProfileFeedback}/> : <Redirect to=\"/\" />} />}\r\n                {<Route exact path=\"/home/recipes\" render={() => (logic.userLoggedIn&& recipes) ? <Results recipes={recipes} onFavourite={this.handleOnFavourites} onDetail ={this.handleOnDetail}/> : <Redirect to = \"/\" />} />}\r\n                {<Route exact path=\"/home/detail\" render={() => (logic.userLoggedIn && recipe)? <Detail recipe={recipe} ingredients={ingredientsList} onFavouriteDetail={this.handleOnFavourites} backToRecipes={this.handleBackToRecipes} backToFavorites={this.handleBackToFavorites} detailsFrom={detailsFrom}/> : <Redirect to = \"/home\" />} />}\r\n                {<Route path=\"/home/feedback\" render={()=> (logic.userLoggedIn && searchFeedback)?<FeedbackSearch goBackSearch={this.handleGoBackSearch} message={searchFeedback}/>:<Redirect to=\"/home\" /> }/>}\r\n                {<Route path=\"/home/favourites\" render={() => (logic.userLoggedIn && favourites)? <Favourites favourites={favourites} goBackHome={this.handleGoBackHome} onFavouriteTrue={this.handleOnFavourites} message={favouritesFeedback}  onDetail ={this.handleOnDetailFavorites}/>:<Redirect to=\"/home\"/> }/>}\r\n\r\n            </main>\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(Home)"]},"metadata":{},"sourceType":"module"}